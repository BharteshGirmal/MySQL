Enter password: *************
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 29
Server version: 8.0.29 MySQL Community Server - GPL

Copyright (c) 2000, 2022, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| assignment1        |
| db1                |
| db2                |
| db3                |
| db4                |
| information_schema |
| mysql              |
| performance_schema |
| practice           |
| sys                |
+--------------------+
10 rows in set (0.00 sec)

mysql> select user from mysql.user;
+------------------+
| user             |
+------------------+
| Bhartesh         |
| mysql.infoschema |
| mysql.session    |
| mysql.sys        |
| root             |
+------------------+
5 rows in set (0.00 sec)

mysql> use db2;
Database changed
mysql> show tables;
+---------------+
| Tables_in_db2 |
+---------------+
| car           |
| demo          |
| dept          |
| employee      |
| employee2     |
| logindetails  |
| logindetails2 |
+---------------+
7 rows in set (0.00 sec)

mysql> create table department feom select dept from db1,dept;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'feom select dept from db1,dept' at line 1
mysql> create table department feom select dept from db1.dept;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'feom select dept from db1.dept' at line 1
mysql> create table department from select dept from db1.dept;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'from select dept from db1.dept' at line 1
mysql> create table department from select * from db1.dept;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'from select * from db1.dept' at line 1
mysql> create table department as select * from db1.dept;
Query OK, 5 rows affected (0.04 sec)
Records: 5  Duplicates: 0  Warnings: 0

mysql> table department;
+--------+------------+----------+------------+------------+
| DEPTNO | DNAME      | LOC      | PWD        | STARTEDON  |
+--------+------------+----------+------------+------------+
|     10 | ACCOUNTING | NEW YORK | r50mpm     | 24/03/1989 |
|     20 | RESEARCH   | DALLAS   | a12recmpm  | 12/04/1989 |
|     30 | SALES      | CHICAGO  | sales@2017 | 13/04/1989 |
|     40 | OPERATIONS | BOSTON   | opr@123    | 12/07/1989 |
|     50 | HR         | PUNE     | PUN@8877   | 22/12/1989 |
+--------+------------+----------+------------+------------+
5 rows in set (0.00 sec)

mysql> # the details od dept from database db1 is get copied here ---> department table of db2 database
mysql> show full tables;
+---------------+------------+
| Tables_in_db2 | Table_type |
+---------------+------------+
| car           | BASE TABLE |
| demo          | BASE TABLE |
| department    | BASE TABLE |
| dept          | BASE TABLE |
| employee      | BASE TABLE |
| employee2     | BASE TABLE |
| logindetails  | BASE TABLE |
| logindetails2 | BASE TABLE |
+---------------+------------+
8 rows in set (0.00 sec)

mysql> # ................................. View Object .................................
mysql>
mysql> # creating view using create statement
mysql>
mysql> create view v1 as select * from department;
Query OK, 0 rows affected (0.01 sec)

mysql> show create view v1;
+------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
| View | Create View                                                                                                                                                                                                                                                                        | character_set_client | collation_connection |
+------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
| v1   | CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v1` AS select `department`.`DEPTNO` AS `DEPTNO`,`department`.`DNAME` AS `DNAME`,`department`.`LOC` AS `LOC`,`department`.`PWD` AS `PWD`,`department`.`STARTEDON` AS `STARTEDON` from `department` | utf8mb4              | utf8mb4_0900_ai_ci   |
+------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
1 row in set (0.00 sec)

mysql> show full tables;
+---------------+------------+
| Tables_in_db2 | Table_type |
+---------------+------------+
| car           | BASE TABLE |
| demo          | BASE TABLE |
| department    | BASE TABLE |
| dept          | BASE TABLE |
| employee      | BASE TABLE |
| employee2     | BASE TABLE |
| logindetails  | BASE TABLE |
| logindetails2 | BASE TABLE |
| v1            | VIEW       |
+---------------+------------+
9 rows in set (0.00 sec)

mysql> select * from v1;
+--------+------------+----------+------------+------------+
| DEPTNO | DNAME      | LOC      | PWD        | STARTEDON  |
+--------+------------+----------+------------+------------+
|     10 | ACCOUNTING | NEW YORK | r50mpm     | 24/03/1989 |
|     20 | RESEARCH   | DALLAS   | a12recmpm  | 12/04/1989 |
|     30 | SALES      | CHICAGO  | sales@2017 | 13/04/1989 |
|     40 | OPERATIONS | BOSTON   | opr@123    | 12/07/1989 |
|     50 | HR         | PUNE     | PUN@8877   | 22/12/1989 |
+--------+------------+----------+------------+------------+
5 rows in set (0.00 sec)

mysql> select * from department;
+--------+------------+----------+------------+------------+
| DEPTNO | DNAME      | LOC      | PWD        | STARTEDON  |
+--------+------------+----------+------------+------------+
|     10 | ACCOUNTING | NEW YORK | r50mpm     | 24/03/1989 |
|     20 | RESEARCH   | DALLAS   | a12recmpm  | 12/04/1989 |
|     30 | SALES      | CHICAGO  | sales@2017 | 13/04/1989 |
|     40 | OPERATIONS | BOSTON   | opr@123    | 12/07/1989 |
|     50 | HR         | PUNE     | PUN@8877   | 22/12/1989 |
+--------+------------+----------+------------+------------+
5 rows in set (0.00 sec)

mysql> # the view table  v1 is only pointing to the department table name
mysql> # if we change the  name of table then v1 table will give the error
mysql> rename table department to d;
Query OK, 0 rows affected (0.02 sec)

mysql> select * from d;
+--------+------------+----------+------------+------------+
| DEPTNO | DNAME      | LOC      | PWD        | STARTEDON  |
+--------+------------+----------+------------+------------+
|     10 | ACCOUNTING | NEW YORK | r50mpm     | 24/03/1989 |
|     20 | RESEARCH   | DALLAS   | a12recmpm  | 12/04/1989 |
|     30 | SALES      | CHICAGO  | sales@2017 | 13/04/1989 |
|     40 | OPERATIONS | BOSTON   | opr@123    | 12/07/1989 |
|     50 | HR         | PUNE     | PUN@8877   | 22/12/1989 |
+--------+------------+----------+------------+------------+
5 rows in set (0.00 sec)

mysql> select * from v1;
ERROR 1356 (HY000): View 'db2.v1' references invalid table(s) or column(s) or function(s) or definer/invoker of view lack rights to use them
mysql> # here it will give the error due to name changed
mysql> rename table d to department;
Query OK, 0 rows affected (0.03 sec)

mysql> select * from department;
+--------+------------+----------+------------+------------+
| DEPTNO | DNAME      | LOC      | PWD        | STARTEDON  |
+--------+------------+----------+------------+------------+
|     10 | ACCOUNTING | NEW YORK | r50mpm     | 24/03/1989 |
|     20 | RESEARCH   | DALLAS   | a12recmpm  | 12/04/1989 |
|     30 | SALES      | CHICAGO  | sales@2017 | 13/04/1989 |
|     40 | OPERATIONS | BOSTON   | opr@123    | 12/07/1989 |
|     50 | HR         | PUNE     | PUN@8877   | 22/12/1989 |
+--------+------------+----------+------------+------------+
5 rows in set (0.00 sec)

mysql> select * from v1;
+--------+------------+----------+------------+------------+
| DEPTNO | DNAME      | LOC      | PWD        | STARTEDON  |
+--------+------------+----------+------------+------------+
|     10 | ACCOUNTING | NEW YORK | r50mpm     | 24/03/1989 |
|     20 | RESEARCH   | DALLAS   | a12recmpm  | 12/04/1989 |
|     30 | SALES      | CHICAGO  | sales@2017 | 13/04/1989 |
|     40 | OPERATIONS | BOSTON   | opr@123    | 12/07/1989 |
|     50 | HR         | PUNE     | PUN@8877   | 22/12/1989 |
+--------+------------+----------+------------+------------+
5 rows in set (0.00 sec)

mysql> rename table department to d;
Query OK, 0 rows affected (0.03 sec)

mysql> show create view;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1
mysql> show create view v1;
+------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
| View | Create View                                                                                                                                                                                                                                                                        | character_set_client | collation_connection |
+------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
| v1   | CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v1` AS select `department`.`DEPTNO` AS `DEPTNO`,`department`.`DNAME` AS `DNAME`,`department`.`LOC` AS `LOC`,`department`.`PWD` AS `PWD`,`department`.`STARTEDON` AS `STARTEDON` from `department` | utf8mb4              | utf8mb4_0900_ai_ci   |
+------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+
1 row in set, 1 warning (0.00 sec)

mysql> rename table d to department;
Query OK, 0 rows affected (0.03 sec)

mysql> insert into v1 values(1,2,3,4,5);
Query OK, 1 row affected (0.01 sec)

mysql> select * from v1;
+--------+------------+----------+------------+------------+
| DEPTNO | DNAME      | LOC      | PWD        | STARTEDON  |
+--------+------------+----------+------------+------------+
|     10 | ACCOUNTING | NEW YORK | r50mpm     | 24/03/1989 |
|     20 | RESEARCH   | DALLAS   | a12recmpm  | 12/04/1989 |
|     30 | SALES      | CHICAGO  | sales@2017 | 13/04/1989 |
|     40 | OPERATIONS | BOSTON   | opr@123    | 12/07/1989 |
|     50 | HR         | PUNE     | PUN@8877   | 22/12/1989 |
|      1 | 2          | 3        | 4          | 5          |
+--------+------------+----------+------------+------------+
6 rows in set (0.00 sec)

mysql> select * from department;
+--------+------------+----------+------------+------------+
| DEPTNO | DNAME      | LOC      | PWD        | STARTEDON  |
+--------+------------+----------+------------+------------+
|     10 | ACCOUNTING | NEW YORK | r50mpm     | 24/03/1989 |
|     20 | RESEARCH   | DALLAS   | a12recmpm  | 12/04/1989 |
|     30 | SALES      | CHICAGO  | sales@2017 | 13/04/1989 |
|     40 | OPERATIONS | BOSTON   | opr@123    | 12/07/1989 |
|     50 | HR         | PUNE     | PUN@8877   | 22/12/1989 |
|      1 | 2          | 3        | 4          | 5          |
+--------+------------+----------+------------+------------+
6 rows in set (0.00 sec)

mysql> # if we insert the data in view object then the same changes will happens in base table also
mysql> # unless and untill we give the permissions to the view table;
mysql> select user();
+----------------+
| user()         |
+----------------+
| root@localhost |
+----------------+
1 row in set (0.00 sec)

mysql> desc department;
+-----------+-------------+------+-----+---------+-------+
| Field     | Type        | Null | Key | Default | Extra |
+-----------+-------------+------+-----+---------+-------+
| DEPTNO    | int         | NO   |     | NULL    |       |
| DNAME     | varchar(12) | YES  |     | NULL    |       |
| LOC       | varchar(10) | YES  |     | NULL    |       |
| PWD       | varchar(20) | YES  |     | NULL    |       |
| STARTEDON | varchar(10) | YES  |     | NULL    |       |
+-----------+-------------+------+-----+---------+-------+
5 rows in set (0.00 sec)

mysql> desc v1;
+-----------+-------------+------+-----+---------+-------+
| Field     | Type        | Null | Key | Default | Extra |
+-----------+-------------+------+-----+---------+-------+
| DEPTNO    | int         | NO   |     | NULL    |       |
| DNAME     | varchar(12) | YES  |     | NULL    |       |
| LOC       | varchar(10) | YES  |     | NULL    |       |
| PWD       | varchar(20) | YES  |     | NULL    |       |
| STARTEDON | varchar(10) | YES  |     | NULL    |       |
+-----------+-------------+------+-----+---------+-------+
5 rows in set (0.00 sec)

mysql> alter table v1 add Coloumn1 int;
ERROR 1347 (HY000): 'db2.v1' is not BASE TABLE
mysql>
mysql>
mysql>
mysql> # creating the new user to check the pwemissions
mysql>
mysql> create user 'PLSQL'@'localhost' identified by 'plsql';
Query OK, 0 rows affected (0.01 sec)

mysql> show tables;
+---------------+
| Tables_in_db2 |
+---------------+
| car           |
| demo          |
| department    |
| dept          |
| employee      |
| employee2     |
| logindetails  |
| logindetails2 |
| v1            |
+---------------+
9 rows in set (0.00 sec)

mysql> # giving all the permissions to the user ---- > PLSQL
mysql>
mysql> grant all privileges on db2. * to 'PLSQL'@'localhost';
Query OK, 0 rows affected (0.01 sec)

mysql> # permissions are given to -----> PLSQL user
mysql>
mysql> # if we update any value from department table
mysql> # then the table is gets locked (deadLock)
mysql> # it can aborted by
mysql> # using 'commit' and 'rollback'
mysql>
mysql> update v1 set dname="ZZZ" where deptno=10;
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from  v1;
+--------+------------+----------+------------+------------+
| DEPTNO | DNAME      | LOC      | PWD        | STARTEDON  |
+--------+------------+----------+------------+------------+
|     10 | ZZZ        | NEW YORK | r50mpm     | 24/03/1989 |
|     20 | RESEARCH   | DALLAS   | a12recmpm  | 12/04/1989 |
|     30 | SALES      | CHICAGO  | sales@2017 | 13/04/1989 |
|     40 | OPERATIONS | BOSTON   | opr@123    | 12/07/1989 |
|     50 | HR         | PUNE     | PUN@8877   | 22/12/1989 |
|      1 | 2          | 3        | 4          | 5          |
+--------+------------+----------+------------+------------+
6 rows in set (0.00 sec)

mysql> select * from  department;
+--------+------------+---------+------------+------------+
| DEPTNO | DNAME      | LOC     | PWD        | STARTEDON  |
+--------+------------+---------+------------+------------+
|     20 | RESEARCH   | DALLAS  | a12recmpm  | 12/04/1989 |
|     30 | SALES      | CHICAGO | sales@2017 | 13/04/1989 |
|     40 | OPERATIONS | BOSTON  | opr@123    | 12/07/1989 |
|     50 | HR         | PUNE    | PUN@8877   | 22/12/1989 |
|      1 | 2          | 3       | 4          | 5          |
+--------+------------+---------+------------+------------+
5 rows in set (0.00 sec)

mysql> commit;
Query OK, 0 rows affected (0.00 sec)

mysql> delete from deptartment where deptno=2;
ERROR 1146 (42S02): Table 'db2.deptartment' doesn't exist
mysql> delete from department where deptno=2;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from  department;
+--------+------------+---------+------------+------------+
| DEPTNO | DNAME      | LOC     | PWD        | STARTEDON  |
+--------+------------+---------+------------+------------+
|     20 | RESEARCH   | DALLAS  | a12recmpm  | 12/04/1989 |
|     30 | SALES      | CHICAGO | sales@2017 | 13/04/1989 |
|     40 | OPERATIONS | BOSTON  | opr@123    | 12/07/1989 |
|     50 | HR         | PUNE    | PUN@8877   | 22/12/1989 |
|      1 | 2          | 3       | 4          | 5          |
+--------+------------+---------+------------+------------+
5 rows in set (0.00 sec)

mysql> update v1 set dname="ZZZ" where deptno=1;
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from  department;
+--------+------------+---------+------------+------------+
| DEPTNO | DNAME      | LOC     | PWD        | STARTEDON  |
+--------+------------+---------+------------+------------+
|     20 | RESEARCH   | DALLAS  | a12recmpm  | 12/04/1989 |
|     30 | SALES      | CHICAGO | sales@2017 | 13/04/1989 |
|     40 | OPERATIONS | BOSTON  | opr@123    | 12/07/1989 |
|     50 | HR         | PUNE    | PUN@8877   | 22/12/1989 |
|      1 | ZZZ        | 3       | 4          | 5          |
+--------+------------+---------+------------+------------+
5 rows in set (0.00 sec)

mysql> delete from deptartment where deptno=1;
ERROR 1146 (42S02): Table 'db2.deptartment' doesn't exist
mysql> delete from department where deptno=1;
Query OK, 1 row affected (0.01 sec)

mysql> delete from department where deptno=1;
Query OK, 0 rows affected (0.00 sec)

mysql> delete from department where deptno=1;
ERROR 2013 (HY000): Lost connection to MySQL server during query
No connection. Trying to reconnect...
Connection id:    8
Current database: db2

Query OK, 0 rows affected (0.02 sec)

mysql> delete from department where deptno=1;
Query OK, 0 rows affected (0.00 sec)

mysql> update v1 set dname="ZZZ" where deptno=1;
Query OK, 0 rows affected (0.00 sec)
Rows matched: 0  Changed: 0  Warnings: 0

mysql> commit;
Query OK, 0 rows affected (0.00 sec)

mysql> # PLSQL
mysql> # drop PROCEDURE if exists pro1;
mysql> delimiter $
mysql> create PROCEDURE pro1()
    -> begin
    -> select " Hello World " as " Message Box ";
    -> end $
Query OK, 0 rows affected, 1 warning (0.02 sec)

mysql> delimiter ;^C
mysql> delimiter ;
mysql> source E:\PLSQL.sql;
ERROR:
Unknown command '\P'.
Query OK, 0 rows affected (0.01 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql> source E:\PLSQL.sql
Query OK, 0 rows affected (0.01 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql> # complication of sql progarm .............................
mysql>
mysql> # to run the program we need to call the procedure name
mysql>
mysql> call pro1();
+---------------+
| Message Box   |
+---------------+
|  Hello World  |
+---------------+
1 row in set (0.00 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql> # complication of sql progarm .............................
mysql> source E:\PLSQL.sql
Query OK, 0 rows affected, 1 warning (0.01 sec)

Query OK, 0 rows affected, 1 warning (0.01 sec)

mysql> # to run the program we need to call the procedure name
mysql> call pro1();
+---------------+
| Message Box   |
+---------------+
|  Hello World  |
+---------------+
1 row in set (0.00 sec)

Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql> call pro2();
ERROR 1318 (42000): Incorrect number of arguments for PROCEDURE db2.pro2; expected 2, got 0
mysql> call pro2(10,20);
+--------------+
| Message Box  |
+--------------+
|           30 |
+--------------+
1 row in set (0.00 sec)

Query OK, 0 rows affected (0.00 sec)

mysql> # complication of sql progarm .............................
mysql> source E:\PLSQL.sql
Query OK, 0 rows affected, 1 warning (0.01 sec)

Query OK, 0 rows affected (0.01 sec)

mysql> set @a=0;
Query OK, 0 rows affected (0.01 sec)

mysql> # declaring a variable as golbal as 0
mysql> set @b=0;
Query OK, 0 rows affected (0.00 sec)

mysql> call pro2(10,20,@a,#b);
    -> call pro3(10,20,@a,#b);
    ->
    -> call pro3(10,20,@a,#b);^C
mysql> call pro2(10,20,@a,@b);
ERROR 1318 (42000): Incorrect number of arguments for PROCEDURE db2.pro2; expected 2, got 4
mysql> call pro3(10,20,@a,@b);
+----------+
| Addition |
+----------+
|       30 |
+----------+
1 row in set (0.00 sec)

+----------------+
| multiplication |
+----------------+
|            200 |
+----------------+
1 row in set (0.00 sec)

Query OK, 0 rows affected (0.00 sec)

mysql> # complication of sql progarm .............................
mysql> source E:\PLSQL.sql
Query OK, 0 rows affected, 1 warning (0.01 sec)

ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '"Square';
end $
delimiter' at line 4
mysql> source E:\PLSQL.sql
Query OK, 0 rows affected, 1 warning (0.01 sec)

ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'delimiter' at line 1
Query OK, 0 rows affected (0.00 sec)

mysql> source E:\PLSQL.sql
Query OK, 0 rows affected (0.01 sec)

Query OK, 0 rows affected (0.01 sec)

mysql> call pro4();
ERROR 1318 (42000): Incorrect number of arguments for PROCEDURE db2.pro4; expected 1, got 0
mysql> set @x=11;
Query OK, 0 rows affected (0.00 sec)

mysql> call pro4(x);
ERROR 1054 (42S22): Unknown column 'x' in 'field list'
mysql> call pro4(@x);
+--------+
| Square |
+--------+
|    121 |
+--------+
1 row in set (0.00 sec)

Query OK, 0 rows affected (0.00 sec)

mysql>